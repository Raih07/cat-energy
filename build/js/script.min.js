document.body.onkeydown=function(e){9===e.keyCode&&(document.body.classList.add("tab-user"),document.addEventListener("click",function(){document.body.classList.remove("tab-user")}))},document.removeEventListener("click",function(){document.body.classList.remove("tab-user")});var nav_toggle=document.getElementsByClassName("main-nav__toggle")[0],main_nav=document.getElementsByClassName("main-nav")[0];main_nav.classList.remove("main-nav--nojs"),nav_toggle.addEventListener("click",function(){main_nav.classList.contains("main-nav--open")?(main_nav.classList.remove("main-nav--open"),main_nav.classList.add("main-nav--close")):(main_nav.classList.remove("main-nav--close"),main_nav.classList.add("main-nav--open"))});var desktop_width=1300;if(document.getElementById("YMapsID")){var myMap,myPlacemar;function init(){var e=document.documentElement.clientWidth||document.body.clientWidth;(myMap=e>=desktop_width?new ymaps.Map("YMapsID",{center:[59.939117,30.319356],zoom:17,controls:[]}):new ymaps.Map("YMapsID",{center:[59.938812,30.323093],zoom:17,controls:[]})).behaviors.disable("scrollZoom"),myMap.controls.add("zoomControl",{float:"none"}),myMap.controls.add("fullscreenControl",{float:"right"}),myMap.controls.add("typeSelector"),myMap.controls.get("typeSelector").options.set("size","small"),myPlacemark=new ymaps.Placemark([59.938812,30.323093],{hintContent:"Cat Energy",balloonContent:"Санкт-Петербург, ул. Большая Конюшенная, д. 19/8"},{iconLayout:"default#image",iconImageHref:"img/map-pin.png",iconImageSize:[124,106],iconImageOffset:[-62,-93]}),myMap.geoObjects.add(myPlacemark)}ymaps.ready(init)}var SLIDE_EVENT="slide",WIDTH_BEFORE=0,WIDTH_AFTER=100,sliderElement=document.querySelector(".compare__bar"),pictureBeforeElement=document.querySelector(".compare__picture--before"),buttonBefore=document.querySelector(".compare__btn--before"),buttonAfter=document.querySelector(".compare__btn--after");if(sliderElement){var sliderCompare=new Slider({elem:sliderElement,max:100});document.addEventListener(SLIDE_EVENT,function(e){pictureBeforeElement.style.width=100-e.detail.pos+"%"}),buttonBefore.addEventListener("click",function(){sliderCompare.setValue(WIDTH_BEFORE)}),buttonAfter.addEventListener("click",function(){sliderCompare.setValue(WIDTH_AFTER)});try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(e){window.CustomEvent=function(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},CustomEvent.prototype=Object.create(window.Event.prototype)}function Slider(e){var t,n,o,a,s=e.elem,c=s.querySelector(".compare__toggle"),m=e.max||100;function r(e,t){var n;s.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{pos:(n=t,Math.round(n/a)),filt_type:e}}))}function i(e){!function(e){var n=e-o-t.left;n<0&&(n=0);var a=s.offsetWidth-c.offsetWidth;n>a&&(n=a),c.style.left=n+"px",r(SLIDE_EVENT,n)}(e.clientX||e.touches[0].clientX)}function l(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",l)}a=(s.offsetWidth-c.offsetWidth)/m,s.ondragstart=function(){return!1},s.ontouchstart=s.onmousedown=function(e){if(e.target.classList.contains("compare__toggle")){var a=e.clientX||e.touches[0].clientX;e.clientY||e.touches[0].clientY;return m=a,n=c.getBoundingClientRect(),t=s.getBoundingClientRect(),o=m-n.left,document.addEventListener("mousemove",i),document.addEventListener("mouseup",l),document.addEventListener("touchmove",i),document.addEventListener("touchend",l),!1}var m},this.setValue=function(e){var t=a*e;console.log(e+", "+t),c.style.left=t+"px",r(SLIDE_EVENT,t)}}}var pop_sucs=document.getElementById("popup_success"),pop_err=document.getElementById("popup_error"),form_contest=document.getElementsByClassName("questionnaire__form")[0],first_name=document.getElementById("first_name"),second_name=document.getElementById("surname"),email=document.getElementById("mail"),storage_name=localStorage.getItem("first_name"),storage_second_name=localStorage.getItem("second_name"),storage_email=localStorage.getItem("email");if(form_contest){function showPopup(e,t){e.classList.remove("popup--close"),e.classList.add("popup--open"),e.getElementsByClassName("popup__btn")[0].onclick=function(){e.classList.contains("popup--success")&&t.submit(),closePopup(e)},document.onkeydown=function(t){27===t.keyCode&&closePopup(e)}}function closePopup(e){e.classList.remove("popup--open"),e.classList.add("popup--close")}storage_name&&(first_name.value=storage_name),storage_second_name&&(second_name.value=storage_second_name),storage_email&&(email.value=storage_email),form_contest.addEventListener("submit",function(e){""==first_name.value||""==second_name.value||""==email.value?(showPopup(pop_err),e.preventDefault()):(showPopup(pop_sucs,form_contest),localStorage.setItem("first_name",first_name.value),localStorage.setItem("second_name",second_name.value),localStorage.setItem("email",email.value),e.preventDefault())})}